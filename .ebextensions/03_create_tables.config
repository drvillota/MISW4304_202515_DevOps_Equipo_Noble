container_commands:
  01_migrate_db:
    command: |
      echo "=== Creating tables if they do not exist ==="
      source /var/app/venv/*/bin/activate
      echo "from application import db" > create_tables.py
      echo "try:" >> create_tables.py
      echo "    db.create_all()" >> create_tables.py
      echo "    print('✅ Tables created successfully.')" >> create_tables.py
      echo "except Exception as e:" >> create_tables.py
      echo "    print(f'⚠️ Error creating tables: {e}')" >> create_tables.py
      python create_tables.py
    leader_only: true
